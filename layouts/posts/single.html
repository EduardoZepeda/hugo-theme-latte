{{ define "main" }}
<div class="content-container">
    <section aria-label="table of contents" class="post-toc">
        {{ partial "toc.html" . }}
    </section>
    <article class="post">
        <h1>{{ .Title }}</h1>
        {{ partial "metadata.html" . }}
        <div class="content">{{ .Content }}</div>
    </article>
    <div class="after-post">
        {{ partial "nextPreviousLinks.html" . }}
        {{ partial "relatedContent.html" . }}
    </div>
</div>
{{ partial "authorInfo.html" . }}
<!-- Enable mermaid diagrams -->
{{ if .Page.Store.Get "hasMermaid" }}
  <script>
    // initialize mermaid after script has been downloaded
    window.addEventListener('turbolinks:load', checkJSLoaded)
    function checkJSLoaded() {
        let script = document.createElement('script')
        script.addEventListener('load', (event) => {
          mermaid?.initialize({ startOnLoad: true })
        })
        script.src = 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js'
        document.body.appendChild(script)
}
  </script>
{{ end }}
<!-- End mermaid diagrams -->
{{ end }}